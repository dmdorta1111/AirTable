# =============================================================================
# ⚠️  SECURITY WARNING - READ CAREFULLY ⚠️
# =============================================================================
# This file contains EXAMPLE configuration values only.
# NEVER commit actual .env files with real credentials/secrets to version control.
# ALWAYS add .env to .gitignore BEFORE adding real values.
#
# PRODUCTION SECURITY CHECKLIST:
# ✓ Use strong, unique passwords (min 32 chars for secrets)
# ✓ Rotate credentials regularly (recommend every 90 days)
# ✓ Use different credentials for each environment
# ✓ Enable SSL/TLS for all database and external connections
# ✓ Limit database user permissions to minimum required
# ✓ Use environment-specific secrets management in production
# ✓ Review access logs regularly
# ✓ Never share credentials via email, chat, or issue trackers
#
# If credentials are accidentally exposed:
# 1. Rotate ALL exposed credentials immediately
# 2. Review access logs for suspicious activity
# 3. Notify your security team
# 4. Update this .env file with new secure values
# =============================================================================
# PyBase Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your environment

# =============================================================================
# Application Settings
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# Secret key for JWT tokens - REQUIRED!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=

# Application name and version
APP_NAME=PyBase
APP_VERSION=0.1.0

# API settings
API_V1_PREFIX=/api/v1

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =============================================================================
# Database Configuration
# =============================================================================
# ⚠️ SECURITY: Database credentials provide full access to your data
# Use strong passwords and limit user permissions. Never reuse passwords.
# ALWAYS use sslmode=require in production environments.
#
# PostgreSQL connection string
# Format: postgresql+asyncpg://username:password@host:port/database?sslmode=require
# Example local: postgresql+asyncpg://pybase:pybase@localhost:5432/pybase
# Example Neon: postgresql+asyncpg://user:pass@ep-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require
DATABASE_URL=postgresql+asyncpg://CHANGE_ME_IN_PRODUCTION:CHANGE_ME_IN_PRODUCTION@localhost:5432/pybase

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# =============================================================================
# Redis Configuration
# =============================================================================
# ⚠️ SECURITY: Redis should be secured with authentication in production
# Consider using Redis ACL for fine-grained access control
#
# Redis connection string
# Format: redis://[:password@]host:port/db
REDIS_URL=redis://localhost:6379/0

# Redis settings
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# Object Storage (S3/MinIO)
# =============================================================================
# ⚠️ SECURITY: S3 credentials provide access to all stored files
# Use IAM roles when possible, rotate access keys regularly
# Never use default keys like "minioadmin" in production
#
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=pybase
S3_REGION=us-east-1

# File upload limits
MAX_UPLOAD_SIZE_MB=100
ALLOWED_EXTENSIONS=pdf,dxf,dwg,ifc,stp,step,png,jpg,jpeg,gif,webp,xlsx,csv

# =============================================================================
# Authentication Settings
# =============================================================================
# ⚠️ SECURITY: SECRET_KEY is critical for JWT token security
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# Keep this secret and rotate it immediately if exposed
#
# JWT token settings
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
PASSWORD_MIN_LENGTH=8

# API key settings
API_KEY_PREFIX=pybase_

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# ⚠️ SECURITY: Email credentials can be used to send spam/fraud emails
# Use app-specific passwords when possible, enable 2FA
#
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@pybase.dev
SMTP_FROM_NAME=PyBase
SMTP_TLS=true

# =============================================================================
# CAD/PDF Extraction Settings
# =============================================================================
# ⚠️ SECURITY: External API keys may have billing implications
# Monitor usage regularly, set up usage alerts
# Rotate keys if suspicious activity detected
#
# Werk24 API (for engineering drawing extraction)
# Get your API key at: https://werk24.io
WERK24_API_KEY=

# Tesseract OCR path (for PDF text extraction)
TESSERACT_CMD=/usr/bin/tesseract

# Extraction settings
EXTRACTION_MAX_PAGES=100
EXTRACTION_DPI=300
EXTRACTION_TIMEOUT_SECONDS=300

# =============================================================================
# Search Settings (Optional - Meilisearch)
# =============================================================================
# ⚠️ SECURITY: Meilisearch API key should be set in production for security
# Generate with a strong random key. Leave empty for development only.
#
# Meilisearch provides fast, typo-tolerant full-text search across all records
# Get started: https://docs.meilisearch.com/learn/getting_started/quick_start.html
#
# Meilisearch connection URL
# Format: http://host:port or https://host:port for production
# Example local: http://localhost:7700
# Example production: https://meilisearch.example.com
MEILISEARCH_URL=http://localhost:7700

# Meilisearch master key (required for production, optional for development)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Leave empty for development without authentication
MEILISEARCH_API_KEY=

# Search performance settings
# MEILISEARCH_TIMEOUT=5  # Request timeout in seconds (default: 5)

# =============================================================================
# Celery / Background Tasks
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# =============================================================================
# Monitoring & Observability (Optional)
# =============================================================================
# ⚠️ SECURITY: Error tracking and monitoring services may expose sensitive data
# Review and sanitize data before sending to external services
# Configure proper data scrubbing rules
#
# Sentry DSN for error tracking
SENTRY_DSN=

# OpenTelemetry settings
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_SERVICE_NAME=pybase

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_REGISTRATION=true
ENABLE_API_KEYS=true
ENABLE_EXTRACTION=true
ENABLE_WEBSOCKETS=true
